<!-- menu_detail.html -->
{% extends 'base.html' %}
{% load static %}
{% load bootstrap4 %}

{% block static %}
    <title>{{ menu.RCP_NM }}</title>
    <link rel="stylesheet" href="{% static 'css/menu_detail.css' %}">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

{% endblock %}

{% block content %}
    <form id="like-form" method="post" action="{% url 'api_toggle_like' food_id=food_id %}">
    {% csrf_token %}
    <button type="submit" id="like-button" value="&#x2661;" name="empty"></button>
    </form>
    <script>
        $(document).ready(function () {
        var userId = response.user_id;
            $.ajax({
                url: '{% url 'api_like_status' food_id=food_id %}',
                type: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + '{user_id: userId}'
                },
                success: function(data) {

                },
                error: function(error) {
                    console.log(error);
                }
            });
        });
    </script>

    <div class="container">
        <div class="upper">
            <div class="img-container">
                <img src="{{ menu.ATT_FILE_NO_MK }}">
            </div>
            <div class="upper_right">
                <div class="hashtags">
                        {% if menu.LOW_NA != 0 %}
                            <span>#저염식</span>
                        {% endif %}
                        {% if menu.HIGH_PRO != 0 %}
                            <span>#고단백식</span>
                        {% endif %}
                        {% if menu.VEGAN != 0 %}
                            <span>#비건식</span>
                        {% endif %}
                        {% if menu.DIETS != 0 %}
                            <span>#식단조절식</span>
                        {% endif %}
                </div>
                <div class="main_menu">{{ menu.RCP_NM }}</div>
                <div class="ingredient">
                    <div class="main_ingre">
                         |재료
                    </div>
                    <div class="detail_ingre">
                         {{ menu.RCP_PARTS_DTLS }}
                    </div>
                </div>
                <div id="all-details" class="details">
                    <div class="nourish">
                         |영양성분
                    </div>
                    <p><b>탄수화물</b>&nbsp;&nbsp;{{ menu.INFO_CAR_x }} g</p>
                    <p><b>에너지</b>&nbsp;&nbsp;&nbsp;{{ menu.INFO_ENG_x }} g</p>
                    <p><b>지방량</b>&nbsp;&nbsp;&nbsp;{{ menu.INFO_FAT_x }} g</p>
                    <p><b>나트륨</b>&nbsp;&nbsp;&nbsp;{{ menu.INFO_NA }} g</p>
                </div>
            </div>
        </div>
        <hr class="hr1">
        <div class="step_add">
            <p class="recipe_step">|조리 과정</p>
            <div class="additional-content-container">
                <div class="additional-content">
                    {% if menu.RCP_NA_TIP != "0" %}
                    <p><mark>{{ menu.RCP_NA_TIP }}</mark></p>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="row">
            <div class="left">
                <div class="col-md-3 recipe-item">
                    <img src="{{ menu.MANUAL_IMG01 }}" alt="Recipe Image">
                    <p>{{ menu.MANUAL01 }}</p>
                </div>
                <div class="col-md-3 recipe-item">
                    <img src="{{ menu.MANUAL_IMG03 }}" alt="Recipe Image">
                    <p>{{ menu.MANUAL03 }}</p>
                </div>
                {% if menu.MANUAL_IMG05 != "0" %}
                <div class="col-md-3 recipe-item">
                    <img src="{{ menu.MANUAL_IMG05 }}" alt="Recipe Image">
                    <p>{{ menu.MANUAL05 }}</p>
                </div>
                {% endif %}
                {% if menu.MANUAL_IMG07 != "0" %}
                <div class="col-md-3 recipe-item">
                    <img src="{{ menu.MANUAL_IMG07 }}" alt="Recipe Image">
                    <p>{{ menu.MANUAL07 }}</p>
                </div>
                {% endif %}
                {% if menu.MANUAL_IMG09 != "0" %}
                <div class="col-md-3 recipe-item">
                    <img src="{{ menu.MANUAL_IMG09 }}" alt="Recipe Image">
                    <p>{{ menu.MANUAL09 }}</p>
                </div>
                {% endif %}
                {% if menu.MANUAL_IMG11 != "0.0" %}
                <div class="col-md-3 recipe-item">
                    <img src="{{ menu.MANUAL_IMG11 }}" alt="Recipe Image">
                    <p>{{ menu.MANUAL11 }}</p>
                </div>
                {% endif %}
            </div>

            <div class="right">
                <div class="col-md-3 recipe-item">
                    <img src="{{ menu.MANUAL_IMG02 }}" alt="Recipe Image">
                    <p>{{ menu.MANUAL02 }}</p>
                </div>
                {% if menu.MANUAL_IMG04 != "0" %}
                    <div class="col-md-3 recipe-item">
                        <img src="{{ menu.MANUAL_IMG04 }}" alt="Recipe Image">
                        <p>{{ menu.MANUAL04 }}</p>
                    </div>
                {% endif %}
                {% if menu.MANUAL_IMG06 != "0" %}
                    <div class="col-md-3 recipe-item">
                        <img src="{{ menu.MANUAL_IMG06 }}" alt="Recipe Image">
                        <p>{{ menu.MANUAL06 }}</p>
                    </div>
                {% endif %}
                {% if menu.MANUAL_IMG08 != "0" %}
                    <div class="col-md-3 recipe-item">
                        <img src="{{ menu.MANUAL_IMG08 }}" alt="Recipe Image">
                        <p>{{ menu.MANUAL08 }}</p>
                    </div>
                {% endif %}{% if menu.MANUAL_IMG10 != "0" %}
                    <div class="col-md-3 recipe-item">
                        <img src="{{ menu.MANUAL_IMG10 }}" alt="Recipe Image">
                        <p>{{ menu.MANUAL10 }}</p>
                    </div>
                {% endif %}
            </div>
        </div>
        <hr class="hr2">
        <div class="comment_name">
            |댓글
        </div>
        <div class="comment">
            <div class="user_name">작성자명</div>
                <div class="c_content">
                    <form class="c_form"><textarea class="c_text" rows="2" placeholder=" 댓글 작성"></textarea></form>
                    <input type="submit" value="입력" class="c_btn">
                </div>
            </div>
        </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <script>
        function toggleAllDetails() {
            var allDetails = document.getElementById('all-details');
            if (allDetails.style.display === "none") {
                allDetails.style.display = "block";
            } else {
                allDetails.style.display = "none";
            }
        }
    </script>
{% endblock %}