
{% extends 'base.html' %}
{% load static %}
{% load bootstrap4 %}

{% block static %}
    <link rel="stylesheet" href="{% static 'css/home.css' %}?after">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
{% endblock %}

{% block content %}

    <div class="wrapper">
        <div class="search">
            <img id='searchbar' src="{% static 'image/searchbar.png' %}" onclick="dis()">
            <div id='checkbox'>
                <p>원하는 카테고리를 모두 선택하세요</p>
                <div class="name">
                    <li class="v">비건식</li>
                    <li class="f">식단 조절</li>
                    <li class="s">저염식</li>
                    <li class="p">고단백식</li>
                </div>
                <div class="check">
                    <input type="checkbox" id="vegun" name="chk_list" onclick="
                    if(this.checked==true){
                        displayImage('vegan_img');
                        $('.name .v').css({
                            'borderColor': 'rgb(93,186,109)',
                            'color': 'white',
                            'backgroundColor': 'rgb(132,206,145)'
                        });
                        $('.btn_ok').css({
                            'borderColor': 'rgb(118,202,113)',
                            'color': 'white',
                            'backgroundColor': 'rgb(118,202,113)'
                        });
                        this.disabled = true;
                       }
                    else{
                        $('.name .v').css({
                            'borderColor': 'rgb(234,234,234)',
                            'color': 'rgb(140,140,140)',
                            'backgroundColor': 'rgb(246,246,246)'
                        });
                    }
                     enableBtnOk();">
                    <label for="vegun"></label>
                    <input type="checkbox" id="l_fat" name="chk_list" onclick="
                    if(this.checked==true){
                        displayImage('dt_img');
                        $('.name .f').css({
                            'borderColor': 'rgb(93,186,109)',
                            'color': 'white',
                            'backgroundColor': 'rgb(132,206,145)'
                        });
                        $('.btn_ok').css({
                            'borderColor': 'rgb(118,202,113)',
                            'color': 'white',
                            'backgroundColor': 'rgb(118,202,113)'
                        });
                        this.disabled = true;
                    }
                    else{
                        $('.name .f').css({
                            'borderColor': 'rgb(234,234,234)',
                            'color': 'rgb(140,140,140)',
                            'backgroundColor': 'rgb(246,246,246)'
                        });
                     }
                     enableBtnOk();">
                    <label for="l_fat"></label>
                    <input type="checkbox" id="l_salt" name="chk_list" onclick="
                    if(this.checked==true){
                        displayImage('ln_img');
                        $('.name .s').css({
                            'borderColor': 'rgb(93,186,109)',
                            'color': 'white',
                            'backgroundColor': 'rgb(132,206,145)'
                        });
                        $('.btn_ok').css({
                            'borderColor': 'rgb(118,202,113)',
                            'color': 'white',
                            'backgroundColor': 'rgb(118,202,113)'
                        });
                        this.disabled = true;
                    }
                    else{
                        $('.name .s').css({
                            'borderColor': 'rgb(234,234,234)',
                            'color': 'rgb(140,140,140)',
                            'backgroundColor': 'rgb(246,246,246)'
                        });
                     }
                     enableBtnOk();">
                    <label for="l_salt"></label>
                    <input type="checkbox" id="h_protein" name="chk_list" onclick="
                    if(this.checked==true){
                        displayImage('hp_img');
                        $('.name .p').css({
                            'borderColor': 'rgb(93,186,109)',
                            'color': 'white',
                            'backgroundColor': 'rgb(132,206,145)'
                        });
                        $('.btn_ok').css({
                            'borderColor': 'rgb(118,202,113)',
                            'color': 'white',
                            'backgroundColor': 'rgb(118,202,113)'
                        });
                        this.disabled = true;
                    }
                    else{
                        $('.name .p').css({
                            'borderColor': 'rgb(234,234,234)',
                            'color': 'rgb(140,140,140)',
                            'backgroundColor': 'rgb(246,246,246)'
                        });
                     }
                     enableBtnOk();">
                    <label for="h_protein"></label>
                </div>
                  <button class="btn_ok" disabled onclick="
                    $('.check input').prop('disabled', true);
                    pageContainer.style.display = 'block';
                    imageContainer.style.display = 'block';">&#10004;</button>
                  <button class="btn_reset" onclick="
                    $('.btn_ok').prop('disabled',true);
                    $('.btn_ok').css({
                      'borderColor': 'rgb(234,234,234)',
                      'color': 'rgb(140,140,140)',
                      'backgroundColor': 'rgb(246,246,246)'
                    });
                    $('#pageContainer').empty();
                    $('#imageContainer').empty();
                    pageContainer.style.display = 'none';
                    imageContainer.style.display = 'none';
                    $('.check input').prop('disabled', false);
                    $('.check input').prop('checked', false);
                    $('.name .v').css({
                        'borderColor': 'rgb(234,234,234)',
                        'color': 'rgb(140,140,140)',
                        'backgroundColor': 'rgb(246,246,246)'
                    });
                    $('.name .f').css({
                        'borderColor': 'rgb(234,234,234)',
                        'color': 'rgb(140,140,140)',
                        'backgroundColor': 'rgb(246,246,246)'
                    });
                    $('.name .s').css({
                        'borderColor': 'rgb(234,234,234)',
                        'color': 'rgb(140,140,140)',
                        'backgroundColor': 'rgb(246,246,246)'
                    });
                    $('.name .p').css({
                        'borderColor': 'rgb(234,234,234)',
                        'color': 'rgb(140,140,140)',
                        'backgroundColor': 'rgb(246,246,246)'
                    });
                  ">&#8634;</button>
                <!-- 이미지가 나타나는 부분 -->
                <div id="pageContainer" class="pagination" style="display: none"></div>
                <div id="imageContainer" style="display: none">
                </div>
            </div>

            </div>

            <script  type="text/javascript">
                function dis(){
                      if($('#checkbox').css('display') == 'none'){
                      $('#checkbox').show();
                    }else{
                      $('#checkbox').hide();
                    }
                 }

                 var imageLists = {
                    'vegan_img': [{% for item in vegan_img %}"{{ item.id }}", "{{ item.ATT_FILE_NO_MAIN }}", "{{ item.RCP_NM }}",{% endfor %}],
                    'hp_img': [{% for item in hp_img %}"{{ item.id }}", "{{ item.ATT_FILE_NO_MAIN }}","{{ item.RCP_NM }}", {% endfor %}],
                    'ln_img': [{% for item in ln_img %}"{{ item.id }}", "{{ item.ATT_FILE_NO_MAIN }}","{{ item.RCP_NM }}", {% endfor %}],
                    'dt_img': [{% for item in dt_img %}"{{ item.id }}", "{{ item.ATT_FILE_NO_MAIN }}","{{ item.RCP_NM }}", {% endfor %}],
                };

                function displayImage(category) {

                // 이미지 리스트에서 해당 카테고리에 대한 이미지를 가져오기

                    var imagesPerPage = 3;
                    var categoryImages = imageLists[category];
                    var pageContainer = $('<div class="imagePage">');
                    // 이미지 리스트에서 해당 카테고리에 대한 이미지를 가져오기

                    // 이미지를 저장
                       for (var i = 0; i <12; i+=3) {
                           var imageId = categoryImages[i];
                           var imageUrl = categoryImages[i + 1];
                           var imageNm=categoryImages[i+2];
                           var imageElement = `
                               <a href="http://127.0.0.1:8000/account/details/${imageId}/">
                               <img src="${imageUrl}" alt="Image">
                               <p>${imageNm}</p>
                               </a>`;
                           pageContainer.append(imageElement);
                           }

                       for(i=0;i<pageContainer.length;i+=9)$('#imageContainer').append(pageContainer);

                       // 이미지가 표시되는 부분을 보여짐
                       createPagination(4)
                       showPage(1);
                }
                        function createPagination(request) {
                            var paginationContainer = $('#pageContainer');
                            paginationContainer.empty();
                            for (var i=1;i<=request;i++){
                                 var pageLink = $('<a href="#" onclick="showPage(' + i + ')">' +i+ '</a>');
                                 paginationContainer.append(pageLink);
                            }
                        }

                        function showPage(pageNumber) {
                            var pages = $('.imagePage');

                            pages.hide();
                            $('#imageContainer .imagePage:nth-child(' + pageNumber + ')').show();

                            // 페이지네이션 활성화 스타일 설정
                            $('#pageContainer a').removeClass('active');
                            $('#pageContainer a:nth-child(' + pageNumber + ')').addClass('active');
                        }

                        function enableBtnOk() {
                            var atLeastOneChecked = $('.check input:checked').length > 0;
                            $('.btn_ok').prop('disabled', !atLeastOneChecked);
                        }
            </script>
        </div>

        <div class="slider" style="margin-top: 50px; margin-bottom: 50px;">
            <input type="radio" name="slide" id="slide1" checked>
            <input type="radio" name="slide" id="slide2">
            <input type="radio" name="slide" id="slide3">
            <input type="radio" name="slide" id="slide4">
            <ul id="imgholder" class="imgs">
                <li><img src="{% static 'image/testimg1.jpg' %}"></li>
                <li><img src="{% static 'image/testimg2.jpeg' %}"></li>
                <li><img src="{% static 'image/testimg3.jpg' %}"></li>
                <li><img src="{% static 'image/testimg4.jpg' %}"></li>
            </ul>
            <div class="bullets">
                <label for="slide1">&nbsp;</label>
                <label for="slide2">&nbsp;</label>
                <label for="slide3">&nbsp;</label>
                <label for="slide4">&nbsp;</label>
            </div>
        </div>


        <div class="member">
            <div>
                BOB.D
                <hr>
                <a href="https://github.com/swupark"><img src="{% static 'image/github.png' %}"></a>
            </div>
            <div>
                이민경
                <hr>
                <a href="https://github.com/mrri-18"><img src="{% static 'image/github.png' %}"></a>
            </div>
            <div>
                김나희
                <hr>
                <a href="https://github.com/umsienrt"><img src="{% static 'image/github.png' %}"></a>
            </div>
            <div>
                박규리
                <hr>
                <a href="https://github.com/Gyuree01"><img src="{% static 'image/github.png' %}"></a>
            </div>
            <div>
                현소정
                <hr>
                <a href="https://github.com/SJ-Hyun"><img src="{% static 'image/github.png' %}"></a>
            </div>
        </div>
    </div>

{% endblock %}